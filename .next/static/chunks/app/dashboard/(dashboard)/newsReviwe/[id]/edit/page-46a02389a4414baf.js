(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[197],{1321:function(e,t,r){Promise.resolve().then(r.bind(r,388))},6648:function(e,t,r){"use strict";r.d(t,{default:function(){return n.a}});var l=r(5601),n=r.n(l)},5601:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return d},getImageProps:function(){return i}});let l=r(9920),n=r(497),s=r(8173),a=l._(r(1241));function i(e){let{props:t}=(0,n.getImgProps)(e,{defaultLoader:a.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let d=s.Image},291:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RouterContext",{enumerable:!0,get:function(){return l}});let l=r(9920)._(r(2265)).default.createContext(null)},285:function(e,t,r){"use strict";var l=r(7437),n=r(2265);r(8268),t.Z=e=>{let{value:t,onChange:s}=e,a=(0,n.useRef)(null),i=(0,n.useRef)(null);return(0,n.useEffect)(()=>{a.current&&r.e(5145).then(r.bind(r,5145)).then(e=>{let{default:r}=e;i.current||(i.current=new r(a.current,{theme:"snow",modules:{toolbar:[[{header:[1,2,3,4,5,6,!1]}],[{font:[]},{size:[]}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{align:[]}],["bold","italic","underline"],["link","image"],[{color:[]},{background:[]}],[{direction:"rtl"}],["clean"]]}}));let l=i.current;t!==l.root.innerHTML&&(l.root.innerHTML=t||"");let n=()=>{s(l.root.innerHTML)};return l.on("text-change",n),()=>{l.off("text-change",n)}})},[t,s]),(0,l.jsx)("div",{ref:a,style:{height:"400px",direction:"ltr"}})}},388:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return g}});var l=r(7437),n=r(1138),s=r(3798),a=r(8472),i=r(3375),d=r(6648),o=r(6463),u=r(2265),c=r(9531),x=r(4129),f=r.n(x);r(8776);var h=r(3580),p=r(285);function g(e){let{params:t}=e,r=(0,i.getCookie)("adminData"),[x,g]=(0,u.useState)(""),[m,v]=(0,u.useState)([]),[b,j]=(0,u.useState)([]),[w,y]=(0,u.useState)([]),[_,N]=(0,u.useState)(!1),[C,k]=(0,u.useState)(""),[S,z]=(0,u.useState)(""),Z=(0,o.useRouter)(),[L,A]=(0,u.useState)(!1),[B,O]=(0,u.useState)([]),[P,D]=(0,u.useState)({title:"",description:"",writer:"",event_date:"",img:"",url:"",part1:"",part2:"",part3:"",keyWords:"",category_id:"",status:"reviewed",adsenseCode:"",videoUrl:"",videoLabel:"",suggestedNews_ids:"",admin_id:""});function E(e){e.preventDefault();let r={title:P.title,writer:P.writer,url:P.url,img:P.img,part1:P.part1,part2:P.part2,part3:P.part3,category_id:P.category_id,"keyWords[]":P.keyWords,status:"reviewed",event_date:P.event_date,adsenseCode:P.adsenseCode,description:P.description,videoLabel:P.videoLabel,videoUrl:P.videoUrl,suggested_news_ids:JSON.stringify(P.suggestedNews_ids),admin_id:P.admin_id};console.log(r),N(!0),(0,a.Z)({url:"".concat(s.BD,"/admin/update/news/").concat(t.id),method:"post",headers:{Authorization:"Bearer ".concat(x.access_token),"Content-Type":"multipart/form-data"},data:r}).then(e=>(console.log(e),N(!1),Z.replace("/dashboard/newsReviwe/".concat(t.id)),h.Am.success("تم تعديل الخبر بنجاح"))).catch(e=>(console.log(e),N(!1),h.Am.error("حدث خطا ما! حاول مجددا")))}return(0,u.useEffect)(()=>{r&&g(JSON.parse(r))},[]),(0,u.useEffect)(()=>{x&&(0,a.Z)({url:"".concat(s.BD,"/admin/showAll/category"),method:"get",headers:{Authorization:"Bearer ".concat(x.access_token)}}).then(e=>{let t=e.data.data;v(null==t?void 0:t.map((e,t)=>({id:t,value:e.id,label:e.name})))}),x&&(0,a.Z)({url:"".concat(s.BD,"/admin/edit/news/").concat(t.id),method:"get",headers:{Authorization:"Bearer ".concat(x.access_token)}}).then(e=>{let t=e.data.data;A(!0),console.log(t),D({title:t.title,description:t.description,category_id:t.category.id,writer:t.writer,img:t.img,adsenseCode:t.adsenseCode,event_date:t.event_date,part1:t.part1,part2:t.part2,part3:t.part3,url:t.url,event_date:t.event_date,videoUrl:t.videoUrl,videoLabel:t.videoLabel,suggestedNews_ids:t.suggested_news,keyWords:t.keyWords,admin_id:t.admin.id}),y(t.keyWords),k(t.category)}),x&&(0,a.Z)({url:"".concat(s.BD,"/admin/showAll/news"),method:"get",headers:{Authorization:"Bearer ".concat(x.access_token)}}).then(e=>{let t=e.data.news;console.log(t);let r=t.filter(e=>"published"==e.status);j(null==r?void 0:r.map((e,t)=>({id:t,value:e.id,label:e.title})))})},[x]),(0,u.useEffect)(()=>{if(x){if(4==x.admin.role.id)return Z.replace("/dashboard/home"),(0,l.jsx)("div",{className:"fixed flex items-center justify-center w-full h-full bg-gray-200 z-50 ".concat(S),children:(0,l.jsx)(n.Z,{})});z("hidden")}},[x,Z]),(0,l.jsxs)("div",{className:"min-h-[550px] w-full flex flex-col gap-6",children:[function(){if(_)return(0,l.jsx)("div",{className:"fixed w-full h-full bg-gray-200/80 z-50 flex items-center justify-center top-0 right-0",children:(0,l.jsx)(n.Z,{})})}(),function(){if(!L)return(0,l.jsx)("div",{className:"w-full h-[400px] bg-gray-100 flex items-center justify-center relative",children:(0,l.jsx)(n.Z,{})});if(L){var e;return console.log(P),(0,l.jsxs)("form",{onSubmit:E,className:"bg-white  p-6 flex flex-col gap-6",children:[(0,l.jsx)("h2",{className:" text-red-700 font-bold text-2xl",children:"اضافه خبر جديد"}),(0,l.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{children:"عنوان الخبر"}),(0,l.jsx)("br",{}),(0,l.jsx)("input",{type:"text",required:!0,value:P.title,onChange:e=>{D(t=>({...t,title:e.target.value}))},placeholder:"ادخل عنوان الخبر",className:"w-full h-10 text-sm rounded-lg p-2 border-gray-200 border focus:border-[2px] outline-none"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{children:"الوصف"}),(0,l.jsx)("br",{}),(0,l.jsx)("input",{type:"text",required:!0,value:P.description,onChange:e=>{D(t=>({...t,description:e.target.value}))},placeholder:"ادخل وصف المقال  ",className:"w-full h-10 text-sm rounded-lg p-2 border-gray-200 border focus:border-[2px] outline-none"})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("label",{children:"القسم"}),(0,l.jsx)("br",{}),(0,l.jsx)("p",{children:C.name})]}),(0,l.jsx)(c.ZP,{options:m,onChange:e=>{D(t=>({...t,category_id:e.value}))}})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{children:"الكاتب"}),(0,l.jsx)("br",{}),(0,l.jsx)("input",{type:"text",value:P.writer,required:!0,placeholder:"ادخل اسم كاتب المقال",onChange:e=>{D(t=>({...t,writer:e.target.value}))},className:"w-full h-10 text-sm rounded-lg p-2 border-gray-200 border focus:border-[2px] outline-none"})]}),(0,l.jsx)("div",{className:"w-full h-[1px] bg-red-700 my-3"}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("label",{children:"صوره الخبر"}),(0,l.jsx)("br",{}),(0,l.jsx)(d.default,{required:!0,src:"".concat(s.xS,"/").concat(P.img),alt:"...",width:100,height:100,className:"w-14 h-10"})]}),(0,l.jsx)("input",{type:"file",placeholder:"",onChange:e=>{D(t=>({...t,img:e.target.files[0]}))},className:"w-full h-10 text-sm rounded-lg p-2 border-gray-200 border focus:border-[2px] outline-none"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{children:"الاخبار المقترحه"}),(0,l.jsx)("br",{}),(0,l.jsx)(c.ZP,{options:b,isMulti:!0,value:B,onChange:e=>{let t=null==e?void 0:e.map(e=>e.value);O(e),D(e=>({...e,suggestedNews_ids:t}))}})]}),(0,l.jsx)("div",{className:" border p-2 flex flex-col gap-1 text-xs -mt-4",children:null==P?void 0:null===(e=P.suggestedNews_ids)||void 0===e?void 0:e.map((e,t)=>{var r;return(0,l.jsx)("p",{children:null===(r=e.suggested_news)||void 0===r?void 0:r.title},t)})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{children:"فيديو خاص بالخبر"}),(0,l.jsx)("br",{}),(0,l.jsx)("p",{className:"text-xs text-blue-500",children:"يظهر عنوان الفيديو تحت القسم الجزء الثانى من المقال"}),(0,l.jsxs)("div",{className:"border p-3 flex flex-col gap-4 rounded-md",children:[(0,l.jsx)("input",{type:"text",value:P.videoLabel,onChange:e=>{D(t=>({...t,videoLabel:e.target.value}))},placeholder:"ادخل اسم الفيديو",className:"w-full h-10 text-sm rounded-lg p-2 border-gray-200 border focus:border-[2px] outline-none"}),(0,l.jsx)("input",{type:"url",value:P.videoUrl,onChange:e=>{D(t=>({...t,videoUrl:e.target.value}))},placeholder:"رابط الفيديو",className:"w-full h-10 text-sm rounded-lg p-2 border-gray-200 border focus:border-[2px] outline-none"})]})]}),(0,l.jsx)("div",{className:"w-full h-[1px] bg-red-700 my-3"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{children:" المقال"}),(0,l.jsx)("br",{}),(0,l.jsx)(p.Z,{required:!0,value:P.part1,onChange:e=>{D(t=>({...t,part1:e}))}})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{children:"الكلمات المفتاحيه"}),(0,l.jsx)("br",{}),(0,l.jsx)(f(),{value:w||[""],required:!0,onChange:e=>{y(e),D(t=>({...t,keyWords:e}))}})]})]}),(0,l.jsx)("div",{className:" flex gap-6 flex-col sm:flex-row",children:(0,l.jsx)("input",{type:"submit",value:"تعديل خبر جديد",className:" text-white bg-red-700 p-2 px-6 cursor-pointer hover:bg-red-800 rounded-lg"})})]})}}()]})}},1138:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var l=r(7437);function n(){return(0,l.jsx)("div",{className:"loader"})}r(9441)},3798:function(e,t,r){"use strict";r.d(t,{BD:function(){return l},xS:function(){return n}});let l="https://zaha.alwatanynews.com/api",n="https://zaha.alwatanynews.com/public"},9441:function(){}},function(e){e.O(0,[269,7480,8472,8173,3580,9531,7087,2971,7023,1744],function(){return e(e.s=1321)}),_N_E=e.O()}]);