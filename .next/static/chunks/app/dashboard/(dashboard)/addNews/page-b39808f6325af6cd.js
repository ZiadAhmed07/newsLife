(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5658],{2827:function(e,t,s){Promise.resolve().then(s.bind(s,6870))},6870:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return g}});var r=s(7437),l=s(1138),a=s(3798),n=s(8472),d=s(3375),i=s(6463),o=s(2265),c=s(9531),u=s(4129),x=s.n(u);s(8776);var h=s(3580);s(8268);var p=e=>{let{value:t,onChange:l}=e,a=(0,o.useRef)(null),n=(0,o.useRef)(null);return(0,o.useEffect)(()=>{a.current&&s.e(5145).then(s.bind(s,5145)).then(e=>{let{default:t}=e;n.current||(n.current=new t(a.current,{theme:"snow",modules:{toolbar:[[{header:[1,2,3,4,5,6,!1]}],[{font:[]},{size:[]}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{align:[]}],["bold","italic","underline"],["link","image"],[{color:[]},{background:[]}],[{direction:"rtl"}],["clean"]]}}));let s=n.current;return s.on("text-change",()=>{l(s.root.innerHTML)}),()=>{s.off("text-change")}})},[t,l]),(0,r.jsx)("div",{ref:a,style:{height:"400px",direction:"ltr"}})};function g(){let e=(0,d.getCookie)("adminData"),[t,s]=(0,o.useState)(""),[u,g]=(0,o.useState)([]),[m,f]=(0,o.useState)([]),[b,j]=(0,o.useState)([]),[v,w]=(0,o.useState)([]),[y,N]=(0,o.useState)(!1),_=(0,i.useRouter)(),[C,k]=(0,o.useState)(""),[S,A]=(0,o.useState)(""),[B,z]=(0,o.useState)(""),[D,Z]=(0,o.useState)({title:"",description:"",writer:"",event_date:"",img:"",url:"",part1:"",part2:"",part3:"",keyWords:"",category_id:"",status:"",adsenseCode:"",videoUrl:"",videoLabel:"",suggestedNews_ids:""});return(0,o.useEffect)(()=>{e&&s(JSON.parse(e))},[]),(0,o.useEffect)(()=>{t&&(0,n.Z)({url:"".concat(a.BD,"/admin/showAll/category"),method:"get",headers:{Authorization:"Bearer ".concat(t.access_token)}}).then(e=>{let t=e.data.data;g(null==t?void 0:t.map((e,t)=>({id:t,value:e.id,label:e.name})))}),t&&(0,n.Z)({url:"".concat(a.BD,"/admin/showAll/news"),method:"get",headers:{Authorization:"Bearer ".concat(t.access_token)}}).then(e=>{let t=e.data.news;console.log(t);let s=t.filter(e=>"published"==e.status);f(null==s?void 0:s.map((e,t)=>({id:t,value:e.id,label:e.title})))})},[t]),(0,r.jsxs)("div",{className:"min-h-[550px] w-full flex flex-col gap-6",children:[function(){if(y)return(0,r.jsx)("div",{className:"fixed w-full h-full bg-gray-200/80 z-50 flex items-center justify-center top-0 right-0",children:(0,r.jsx)(l.Z,{})})}(),(0,r.jsxs)("form",{onSubmit:function(e){e.preventDefault();let s={title:D.title,writer:D.writer,event_date:D.event_date,img:D.img,url:D.url,part1:C,part2:S,part3:B,"keyWords[]":D.keyWords,category_id:D.category_id,status:"reviewed",adsenseCode:t.admin.adsenseCode,description:D.description,videoUrl:D.videoUrl,videoLabel:D.videoLabel,suggested_news_ids:JSON.stringify(D.suggestedNews_ids)};return D.title&&D.writer&&D.img&&s.part1&&D.category_id&&D.description?D.description.length<=160?C.length>=2e3?void(N(!0),(0,n.Z)({url:"".concat(a.BD,"/admin/create/news"),method:"post",headers:{Authorization:"Bearer ".concat(t.access_token),"Content-Type":"multipart/form-data"},data:s,onUploadProgress:function(e){console.log(e.bytes)}}).then(e=>(console.log(e),N(!1),_.replace("/dashboard/myNews/review"),h.Am.success("تم انشاء الخبر بنجاح"))).catch(e=>(console.log(e),N(!1),h.Am.error("حدث خطا ما! حاول مجددا")))):h.Am.warn("يجب ان يكون  المقال اكثر من 2000 حرف"):h.Am.warn("يجب ان يكون وصف الخبر اقل من 160 حرف"):h.Am.warn("يجب اكمال البيانات المفقوده")},className:"bg-white  p-6 flex flex-col gap-6",children:[(0,r.jsx)("h2",{className:" text-red-700 font-bold text-2xl",children:"اضافه خبر جديد"}),(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"عنوان الخبر"}),(0,r.jsx)("br",{}),(0,r.jsx)("input",{type:"text",onChange:e=>{Z(t=>({...t,title:e.target.value}))},placeholder:"ادخل عنوان الخبر",className:"w-full h-10 text-sm rounded-lg p-2 border-gray-200 border focus:border-[2px] outline-none"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"الوصف"}),(0,r.jsx)("br",{}),(0,r.jsx)("input",{type:"text",onChange:e=>{Z(t=>({...t,description:e.target.value}))},placeholder:"ادخل وصف الخبر  ",className:"w-full h-10 text-sm rounded-lg p-2 border-gray-200 border focus:border-[2px] outline-none"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"القسم"}),(0,r.jsx)("br",{}),(0,r.jsx)(c.ZP,{options:u,onChange:e=>{Z(t=>({...t,category_id:e.value}))}})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"الكاتب"}),(0,r.jsx)("br",{}),(0,r.jsx)("input",{type:"text",placeholder:"كاتب المقال",onChange:e=>{Z(t=>({...t,writer:e.target.value}))},className:"w-full h-10 text-sm rounded-lg p-2 border-gray-200 border focus:border-[2px] outline-none"})]}),(0,r.jsx)("div",{className:"w-full h-[1px] bg-red-700 my-3"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"صوره الخبر"}),(0,r.jsx)("br",{}),(0,r.jsx)("input",{type:"file",placeholder:"",onChange:e=>{Z(t=>({...t,img:e.target.files[0]}))},className:"w-full h-10 text-sm rounded-lg p-2 border-gray-200 border focus:border-[2px] outline-none"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"الاخبار المقترحه"}),(0,r.jsx)("br",{}),(0,r.jsx)(c.ZP,{options:m,isMulti:!0,value:v,onChange:e=>{let t=null==e?void 0:e.map(e=>e.value);w(e),Z(e=>({...e,suggestedNews_ids:t}))}})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"فيديو خاص بالخبر"}),(0,r.jsx)("br",{}),(0,r.jsx)("p",{className:"text-xs text-blue-500",children:"يظهر عنوان الفيديو تحت القسم الجزء الثانى من المقال"}),(0,r.jsxs)("div",{className:"border p-3 flex flex-col gap-4 rounded-md",children:[(0,r.jsx)("input",{type:"text",placeholder:"ادخل اسم الفيديو",onChange:e=>{Z(t=>({...t,videoLabel:e.target.value}))},className:"w-full h-10 text-sm rounded-lg p-2 border-gray-200 border focus:border-[2px] outline-none"}),(0,r.jsx)("input",{type:"url",placeholder:"رابط الفيديو",onChange:e=>{Z(t=>({...t,videoUrl:e.target.value}))},className:"w-full h-10 text-sm rounded-lg p-2 border-gray-200 border focus:border-[2px] outline-none"})]})]}),(0,r.jsx)("div",{className:"w-full h-[1px] bg-red-700 my-3"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"الجزء الاول من المقال"}),(0,r.jsx)("br",{}),(0,r.jsx)(p,{onChange:e=>{k(e)}})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"الكلمات المفتاحيه"}),(0,r.jsx)("br",{}),(0,r.jsx)(x(),{value:b||[""],onChange:e=>{j(e),Z(t=>({...t,keyWords:e}))}})]})]}),(0,r.jsxs)("div",{className:"p-4 border border-red-700 rounded-md text-gray-500 font-bold text-sm",children:[(0,r.jsx)("h2",{className:"text-lg",children:" اتباع القواعد اللغوية والاملائيه"}),(0,r.jsxs)("ol",{className:"p-2 pr-6",children:[(0,r.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,r.jsx)("span",{className:"h-2 w-2 rounded-full bg-red-700"}),(0,r.jsx)("li",{children:"مراعاه ال seo"})]}),(0,r.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,r.jsx)("span",{className:"h-2 w-2 rounded-full bg-red-700"}),(0,r.jsxs)("li",{children:["لا تقل عن ٣٥٠ كلمه ","(2000 حرف)"]})]}),(0,r.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,r.jsx)("span",{className:"h-2 w-2 rounded-full bg-red-700"}),(0,r.jsxs)("li",{children:["الوصف ا يعزيد عن ٢٠ كلمه ","(160 حرف)"]})]}),(0,r.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,r.jsx)("span",{className:"h-2 w-2 rounded-full bg-red-700"}),(0,r.jsx)("li",{children:"العنوان  الرئيسي لا يزيد عن ١٠ كلمات"})]}),(0,r.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,r.jsx)("span",{className:"h-2 w-2 rounded-full bg-red-700"}),(0,r.jsxs)("li",{children:["مراعات عمل عناوين فرعيه ","(heading 2)"]})]})]})]}),(0,r.jsxs)("div",{className:" flex gap-6 flex-col sm:flex-row",children:[(0,r.jsx)("input",{type:"submit",value:"اضافه خبر جديد",className:" text-white bg-red-700 p-2 px-6 cursor-pointer hover:bg-red-800 rounded-lg"}),(0,r.jsx)("input",{type:"button",onClick:function(e){e.preventDefault(),N(!0);let s={title:D.title,writer:D.writer,event_date:D.event_date,img:D.img,url:D.url,part1:C,part2:S,part3:B,"keyWords[]":D.keyWords,category_id:D.category_id,status:"pending",adsenseCode:t.admin.adsenseCode,description:D.description,videoUrl:D.videoUrl,videoLabel:D.videoLabel,suggested_news_ids:JSON.stringify(D.suggestedNews_ids)};console.log(s),(0,n.Z)({url:"".concat(a.BD,"/admin/create/news"),method:"post",headers:{Authorization:"Bearer ".concat(t.access_token),"Content-Type":"multipart/form-data"},data:s}).then(e=>(console.log(e),N(!1),_.replace("/dashboard/myNews"),h.Am.success("تم حفظ الخبر في المسوده"))).catch(e=>(console.log(e),N(!1),h.Am.error("حدث خطا ما! حاول مجددا")))},value:"حفظ في مسوده",className:" text-white bg-gray-700 p-2 px-6 cursor-pointer hover:bg-gray-800 rounded-lg"})]})]})]})}},1138:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var r=s(7437);function l(){return(0,r.jsx)("div",{className:"loader"})}s(9441)},3798:function(e,t,s){"use strict";s.d(t,{BD:function(){return r},xS:function(){return l}});let r="https://zaha.alwatanynews.com/api",l="https://zaha.alwatanynews.com/public"},9441:function(){}},function(e){e.O(0,[269,7480,8472,3580,9531,7087,2971,7023,1744],function(){return e(e.s=2827)}),_N_E=e.O()}]);